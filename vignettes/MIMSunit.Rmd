---
title: "Quick start to use MIMSunit"
output: rmarkdown::html_vignette
author: "Qu Tang"
date: "November 21, 2017"
vignette: >
  %\VignetteIndexEntry{pkgdown}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

### Make sure you prepare your raw accelerometer data in following csv format

```
HEADER_TIME_STAMP,X,Y,Z
2016-10-03 14:51:14.236,0.007,-0.005,0.984
2016-10-03 14:51:14.256,0.008,-0.007,0.981
2016-10-03 14:51:14.276,0.009,-0.006,0.978
2016-10-03 14:51:14.297,0.009,-0.007,0.984
2016-10-03 14:51:14.317,0.010,-0.010,0.982
2016-10-03 14:51:14.337,0.011,-0.010,0.982
```

### Load into memory using [`mHealthR`](https://qutang.github.io/mHealthR/) package

```{r, include=FALSE}
wd = getwd()
if(stringr::str_detect(wd, "articles")){
  file_path = normalizePath(file.path(wd, "../../vignettes/data/shaker.csv"))
}else{
  file_path = normalizePath(file.path(wd, "../vignettes/data/shaker.csv"))
}
options(digits.secs=3)
```

```{r load_data, warning=FALSE, message=FALSE}
df = mHealthR::mhealth.read(file_path, filetype='sensor')
```

```{r, echo=FALSE}
knitr::kable(head(df, 5))
```

```{r, echo=FALSE, fig.height=4, fig.width=8, message=FALSE, warning=FALSE}
mHealthR::mhealth.plot_timeseries(list(df), file_types=c('sensor'), select_cols = list(c(2, 3, 4)), ncols = 1)
```

### Run MIMS-unit algorithm on input data

```r
mims = MIMSunit::mims_unit(df, breaks = '1 min', range = c(-2, 2))
```

```{r, message=FALSE, warning=FALSE, include=FALSE}
mims = MIMSunit::mims_unit(df, breaks = '5 sec', range = c(-2, 2))
```

```{r, echo=FALSE}
knitr::kable(head(mims, 5))
```

```{r, echo=FALSE, fig.height=4, fig.width=8, message=FALSE, warning=FALSE}
mHealthR::mhealth.plot_timeseries(list(mims), file_types=c('sensor'), select_cols = list(c(2)), ncols = 1)
```